<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <title>{% block title %}Admin Dashboard{% endblock %}</title>
    <link rel="icon" href="{{ asset('assets/img/kaiadmin/favicon.ico') }}" type="image/x-icon">

    {% block css %}
        <script src="{{ asset('assets/js/plugin/webfont/webfont.min.js') }}"></script>
        <script>
            WebFont.load({
                google: { families: ["Public Sans:300,400,500,600,700"] },
                custom: {
                    families: [
                        "Font Awesome 5 Solid",
                        "Font Awesome 5 Regular",
                        "Font Awesome 5 Brands",
                        "simple-line-icons",
                    ],
                    urls: ["{{ asset('assets/css/fonts.min.css') }}"],
                },
                active: function () {
                    sessionStorage.fonts = true;
                },
            });
        </script>

        <!-- CSS Files -->
        <link rel="stylesheet" href="{{ asset('assets/css/bootstrap.min.css') }}">
        <link rel="stylesheet" href="{{ asset('assets/css/plugins.min.css') }}">
        <link rel="stylesheet" href="{{ asset('assets/css/kaiadmin.min.css') }}">

        <style>
            :root {
                --sidebar-width: 250px;
                --header-height: 60px;
                --transition-speed: 0.3s;
                --primary-color: #5e72e4;
                --secondary-color: #825ee4;
            }

            .bg-gradient-primary {
                background: linear-gradient(87deg, var(--primary-color) 0, var(--secondary-color) 100%);
            }

            .sidebar {
                background: linear-gradient(180deg, #2c2c2c 0%, #1a1a1a 100%);
            }

            .main-header {
                backdrop-filter: blur(10px);
                background: rgba(255, 255, 255, 0.95);
            }

            .notification-badge {
                position: absolute;
                top: 0;
                right: 0;
                padding: 0.25rem 0.5rem;
                font-size: 0.75rem;
                border-radius: 50%;
                background: #f5365c;
                color: white;
            }

            .nav-item a:hover {
                background: rgba(255, 255, 255, 0.1);
                transform: translateX(5px);
            }

            .dropdown-menu {
                animation: dropdownFade 0.3s ease;
            }

            @keyframes dropdownFade {
                from { opacity: 0; transform: translateY(-10px); }
                to { opacity: 1; transform: translateY(0); }
            }

            body {
                overflow-x: hidden;
                background-color: #f5f7fb;
            }

            /* Fixed Sidebar */
            .sidebar {
                position: fixed;
                top: 0;
                left: 0;
                bottom: 0;
                width: var(--sidebar-width);
                z-index: 1000;
                transition: all var(--transition-speed) ease;
                overflow-y: auto;
                box-shadow: 0 0 15px rgba(0, 0, 0, 0.1);
            }

            /* Main Panel Adjustment */
            .main-panel {
                margin-left: var(--sidebar-width);
                width: calc(100% - var(--sidebar-width));
                min-height: 100vh;
                display: flex;
                flex-direction: column;
                transition: all var(--transition-speed) ease;
            }

            /* Header Styling */
            .main-header {
                position: sticky;
                top: 0;
                z-index: 999;
                background: #fff;
                box-shadow: 0 1px 15px rgba(0, 0, 0, 0.04);
                height: var(--header-height);
            }

            /* Content Area */
            .main-content {
                flex: 1;
                padding: 20px;
                margin-top: var(--header-height);
            }

            /* Footer Styling */
            .footer {
                background: #fff;
                padding: 15px;
                border-top: 1px solid #e9ecef;
            }

            /* Improved Navigation */
            .nav-item {
                margin-bottom: 5px;
            }

            .nav-item a {
                border-radius: 4px;
                transition: all 0.2s;
            }

            .nav-item.active a {
                background: rgba(255, 255, 255, 0.1);
                font-weight: 500;
            }

            /* Better Dropdowns */
            .dropdown-menu {
                border: none;
                box-shadow: 0 5px 25px rgba(0, 0, 0, 0.1);
            }

            /* Responsive Adjustments */
            @media (max-width: 991px) {
                .sidebar {
                    transform: translateX(-100%);
                }

                .sidebar.active {
                    transform: translateX(0);
                }

                .main-panel {
                    margin-left: 0;
                    width: 100%;
                }

                .main-panel.active {
                    margin-left: var(--sidebar-width);
                    width: calc(100% - var(--sidebar-width));
                }
            }
        </style>

        {% block stylesheets %}{% endblock %}
    {% endblock %}
</head>
<body>
<div class="wrapper">

    <div class="sidebar" data-background-color="dark">
        <div class="sidebar-logo">
            <div class="logo-header" data-background-color="dark">
                <a href="{{ path('app_Admin') }}" class="logo">
                    <img src="{{ asset('assets/img/kaiadmin/logo.png') }}" alt="Logo" height="60">
            
                </a>
                <button class="btn btn-toggle toggle-sidebar d-lg-none">
                    <i class="gg-menu-right"></i>
                </button>
            </div>
        </div>

        <div class="sidebar-wrapper scrollbar scrollbar-inner">
            <div class="sidebar-content">
                <ul class="nav nav-secondary">
                    <li class="nav-item {% if app.request.attributes.get('_route') == 'app_Admin' %}active{% endif %}">
                        <a href="{{ path('app_Admin') }}">
                            <i class="fas fa-home"></i>
                            <p>Dashboard</p>
                            <span class="badge bg-primary float-end">New</span>
                        </a>
                    </li>

                    <!-- User Management Section -->
                    <li class="nav-section">
                        <span class="sidebar-mini-icon"><i class="fa fa-users"></i></span>
                        <h4 class="text-section">User Management</h4>
                    </li>

                    <li class="nav-item {% if 'app_user' in app.request.attributes.get('_route') %}active{% endif %}">
                        <a data-bs-toggle="collapse" href="#userManagement">
                            <i class="fas fa-user-cog"></i>
                            <p>Users</p>
                            <span class="caret"></span>
                        </a>
                        <div class="collapse {% if 'app_user' in app.request.attributes.get('_route') %}show{% endif %}" id="userManagement">
                            <ul class="nav nav-collapse">
                                <li class="{% if app.request.attributes.get('_route') == 'app_user_index' %}active{% endif %}">
                                    <a href="{{ path('app_user_index') }}">
                                        <span class="sub-item">All Users</span>
                                        <span class="badge bg-info float-end">42</span>
                                    </a>
                                </li>
                                <li class="{% if app.request.attributes.get('_route') == 'app_user_new' %}active{% endif %}">
                                    <a href="{{ path('app_user_new') }}">
                                        <span class="sub-item">Add New User</span>
                                    </a>
                                </li>
                            </ul>
                        </div>
                    </li>

                    <!-- Additional Menu Items -->
                    {% block sidebar_items %}
                        <li class="nav-item {% if app.request.attributes.get('_route') == 'app_about' %}active{% endif %}">
                            <a href="{{ path('app_about') }}">
                                <i class="fas fa-info-circle"></i>
                                <p>About</p>
                            </a>
                        </li>
                        <li class="nav-item {% if app.request.attributes.get('_route') == 'app_services' %}active{% endif %}">
                            <a href="{{ path('app_services') }}">
                                <i class="fas fa-concierge-bell"></i>
                                <p>Services</p>
                            </a>
                        </li>
                    {% endblock %}
                </ul>
            </div>
        </div>
    </div>

    <div class="main-panel">
        <!-- Header -->
        <div class="main-header">
            <div class="main-header-logo">
                <div class="logo-header" data-background-color="dark">
                    <button class="btn btn-toggle toggle-sidebar d-none d-lg-block">
                        <i class="gg-menu-right"></i>
                    </button>
                </div>
            </div>

            <nav class="navbar navbar-header navbar-expand-lg border-bottom">
                <div class="container-fluid">
                    <!-- Search Bar -->
    

                    <!-- Top Navigation -->
                    <ul class="navbar-nav topbar-nav ms-auto align-items-center">
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">
                                <i class="fas fa-bell"></i>
                                <span class="notification-badge">4</span>
                            </a>
                            <div class="dropdown-menu dropdown-menu-end notification-dropdown p-0">
                                <div class="dropdown-header">
                                    <h6>Notifications</h6>
                                    <span class="badge bg-primary">4 New</span>
                                </div>
                                <div class="dropdown-body">
                                    <a href="#" class="dropdown-item">
                                        <div class="icon bg-info">
                                            <i class="fas fa-user-plus"></i>
                                        </div>
                                        <div class="content">
                                            <p>New user registered</p>
                                            <small>2 mins ago</small>
                                        </div>
                                    </a>
                                </div>
                                <div class="dropdown-footer">
                                    <a href="#">View all notifications</a>
                                </div>
                            </div>
                        </li>

                        <li class="nav-item dropdown ms-2">
                            <a class="nav-link dropdown-toggle d-flex align-items-center" href="#" role="button" data-bs-toggle="dropdown">
                                <img src="{{ asset('assets/img/profile.jpg') }}" alt="Profile" class="rounded-circle" width="35">
                                <span class="ms-2 d-none d-lg-inline-block">Admin User</span>
                            </a>
                            <div class="dropdown-menu dropdown-menu-end profile-dropdown">
                                <div class="dropdown-header">
                                    <h6>Admin User</h6>
                                    <span>Administrator</span>
                                </div>
                                <a href="#" class="dropdown-item">
                                    <i class="fas fa-user me-2"></i> Profile
                                </a>
                                <a href="#" class="dropdown-item">
                                    <i class="fas fa-cog me-2"></i> Settings
                                </a>
                                <a href="#" class="dropdown-item">
                                    <i class="fas fa-envelope me-2"></i> Messages
                                </a>
                                <div class="dropdown-divider"></div>
                                <a href="{{path('app_user_new')}}" class="dropdown-item text-danger">
                                    <i class="fas fa-sign-out-alt me-2"></i> Logout
                                </a>
                            </div>
                        </li>
                    </ul>
                </div>
            </nav>
        </div>
        <div class="main-content">
            {% block breadcrumb %}
            {% endblock %}

            {% block body %}
                <div class="container-fluid">
                    <div class="page-inner">
                        {% block page_header %}
                            <div class="page-header">
                                <h1 class="page-title">{% block page_title %}Dashboard{% endblock %}</h1>
                                <div class="page-actions">
                                    {% block page_actions %}{% endblock %}
                                </div>
                            </div>
                        {% endblock %}

                        {% block content %}{% endblock %}
                    </div>
                </div>
            {% endblock %}
        </div>

        <!-- Footer -->
        <footer class="footer">
            <div class="container-fluid">
                <div class="copyright float-start">
                    &copy; {{ "now"|date("Y") }} Your Company. All rights reserved.
                </div>
                <div class="float-end">
                    <span class="text-muted">Version 1.0.0</span>
                </div>
            </div>
        </footer>
    </div>
</div>

{% block js %}
    <!-- Core JS Files -->
    <script src="{{ asset('assets/js/core/jquery-3.7.1.min.js') }}"></script>
    <script src="{{ asset('assets/js/core/popper.min.js') }}"></script>
    <script src="{{ asset('assets/js/core/bootstrap.min.js') }}"></script>
    <!-- Plugins -->
    <script src="{{ asset('assets/js/plugin/jquery-scrollbar/jquery.scrollbar.min.js') }}"></script>
    <script src="{{ asset('assets/js/plugin/chart.js/chart.min.js') }}"></script>
    <script src="{{ asset('assets/js/plugin/datatables/datatables.min.js') }}"></script>
    <script src="{{ asset('assets/js/plugin/sweetalert/sweetalert.min.js') }}"></script>

    <!-- Kaiadmin JS -->
    <script src="{{ asset('assets/js/kaiadmin.min.js') }}"></script>

    <!-- Custom JS -->
    <script>
        $(document).ready(function() {
            // Initialize tooltips
            $('[data-bs-toggle="tooltip"]').tooltip();

            // Initialize popovers
            $('[data-bs-toggle="popover"]').popover();

            // Toggle sidebar
            $('.toggle-sidebar').click(function() {
                $('.sidebar').toggleClass('active');
                $('.main-panel').toggleClass('active');
            });

            // Activate current menu item
            $('.nav-item a').each(function() {
                if ($(this).attr('href') === window.location.pathname) {
                    $(this).parent().addClass('active');
                }
            });

            $(document).click(function(e) {
                if ($(window).width() < 992) {
                    if (!$(e.target).closest('.sidebar, .toggle-sidebar').length) {
                        $('.sidebar').removeClass('active');
                        $('.main-panel').removeClass('active');
                    }
                }
            });

            // Perfect scrollbar for sidebar
            if ($('.sidebar-wrapper').length) {
                const sidebarScrollbar = new PerfectScrollbar('.sidebar-wrapper');
            }

            // Auto collapse other dropdowns when one is opened
            $('.nav-item .collapse').on('show.bs.collapse', function() {
                $('.nav-item .collapse.show').not(this).collapse('hide');
            });
        });
    </script>

    {% block javascripts %}{% endblock %}
{% endblock %}
</body>
</html>
